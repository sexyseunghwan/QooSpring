<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<!-- 
	MyBatis 특징
	- SQL 을  *.java 에서 작성하지 않고 별도의 *.xml 에서 작성/관리한다.
	- SQL을 관리하는 XML을 매퍼(Mapper) 라고 한다.
	
 -->
<mapper namespace="tuning">
	
	<update id="s1" parameterType="com.test.qoologin.UserDTO" statementType="CALLABLE">
		
		{
			call dbo.qoo10_dummy_init (#{qoouser_id},#{qoouser_pw},#{qoouser_birthday},#{qoouser_email},#{qoouser_gender},#{qoouser_nation},#{qoouser_ipaddress},#{qoouser_hascoin},#{qoouser_phone_num},#{qoouser_grade},#{qoouser_receive_email},#{qoouser_receive_sms},#{qoouser_denide},#{qoouser_register_datetime},#{qoouser_lastlogin_datetime},#{qoouser_lastlogin_ipaddress})
		}
	
	</update>
	
	<update id="s2" parameterType="com.test.qoologin.BuyDTO" statementType="CALLABLE">
		
		{
			call dbo.qoo10_buy_dummy (#{buy_qoouser_seq}
									 ,#{product_serial}
									 ,#{product_quantity}
									 ,#{buy_date}
									 ,#{buy_confirm_date})
		}
	
	</update>
	
	<select id="loginVerification" resultType="Integer" parameterType="java.util.HashMap" statementType="CALLABLE" >
		declare @login_code int
		exec dbo.qoo10_total_login #{userIp}, #{id}, #{encpw}, @login_code output
		select @login_code	
	</select>
	
	<select id="advertiseShow" resultType="com.test.loginetc.AdverDTO" statementType="CALLABLE" >
		
		{
			call dbo.advertise_show
		}
		
	</select>
	
	<select id="qooSignUpsp" resultType="Integer" parameterType="com.test.loginetc.SignUpDTO" statementType="CALLABLE" >
		
		declare @result int
		exec dbo.qoo_sign_up #{qoouser_id},#{qoouser_pw},#{qoouser_birthday},#{qoouser_email},#{qoouser_gender},
							 #{qoouser_nation}, #{qoouser_ipaddress}, #{qoouser_phone_num}, #{qoouser_receive_email},
							 #{qoouser_receive_sms}, #{qoouser_name}, @result output
		select @result
		
	</select>
	
	<select id="qooSignUpspIdCheck" resultType="Integer" parameterType="String" statementType="CALLABLE" >
		
		declare @result int
		exec qoo_sign_up_id_check #{},@result output
		select @result
		
	</select>
	
	
	
</mapper>



